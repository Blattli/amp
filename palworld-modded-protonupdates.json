[
  {
    "UpdateStageName": "SteamCMD Download",
    "UpdateSourcePlatform": "All",
    "UpdateSource": "SteamCMD",
    "UpdateSourceData": "2394010",
    "UpdateSourceArgs": "1623730",
    "ForceDownloadPlatform": "Windows",
    "UpdateSourceVersion": "public",
    "SkipOnFailure": false
  },
  {
    "UpdateStageName": "Create Config Directory",
    "UpdateSourcePlatform": "All",
    "UpdateSource": "CreateDirectory",
    "UpdateSourceArgs": "{{$FullBaseDir}}Pal/Saved/Config/WindowsServer"
  },
  {
    "UpdateStageName": "SteamCMD Component Download",
    "UpdateSourcePlatform": "All",
    "UpdateSource": "SteamCMD",
    "UpdateSourceData": "1007",
    "UpdateSourceArgs": "1623730",
    "UpdateSourceTarget": "2394010/Pal/Binaries/Win64",
    "ForceDownloadPlatform": "Windows",
    "SkipOnFailure": false
  },
  {
    "UpdateStageName": "Config Template Download",
    "UpdateSourcePlatform": "All",
    "UpdateSource": "FetchURL",
    "UpdateSourceData": "https://raw.githubusercontent.com/CubeCoders/AMPTemplates/main/palworld16templatesettings.ini",
    "UpdateSourceTarget": "{{$FullRootDir}}",
    "UpdateSourceArgs": "AMP_PalWorldSettings.ini",
    "OverwriteExistingFiles": true,
    "SkipOnFailure": false
  },
  {
    "UpdateStageName": "Proton GE Download",
    "UpdateSourcePlatform": "Linux",
    "UpdateSource": "Executable",
    "UpdateSourceData": "/bin/bash",
    "UpdateSourceArgs": "-c \"cd \\\"{{$FullRootDir}}\\\"; mkdir -p \\\"{{$FullRootDir}}.proton/compatdata\\\" \\\"{{$FullBaseDir}}.steam/steam\\\" \\\"{{$FullBaseDir}}.steam/sdk32\\\" \\\"{{$FullBaseDir}}.steam/sdk64\\\" \\\"{{$FullBaseDir}}.config/protonfixes\\\" && \\cp -f \\\"{{$FullRootDir}}linux32/steamclient.so\\\" \\\"{{$FullBaseDir}}.steam/sdk32/steamclient.so\\\" && \\cp -f \\\"{{$FullRootDir}}linux64/steamclient.so\\\" \\\"{{$FullBaseDir}}.steam/sdk64/steamclient.so\\\" && \\cp -f \\\"{{$FullRootDir}}linux64/steamclient.so\\\" \\\"{{$FullBaseDir}}.steam/steam/steamclient.so\\\"; ProtonVersion=\\\"{{SpecificReleaseVersion}}\\\"; if [[ \\\"$ProtonVersion\\\" == *\\\"SpecificReleaseVersion\\\"* || -z \\\"$ProtonVersion\\\" ]]; then ProtonVersion=\\\"GE-Proton10-26\\\"; fi; echo \\\"Target Proton Version: $ProtonVersion\\\"; if [[ -x \\\"{{$FullRootDir}}.proton/proton\\\" && -f \\\"{{$FullRootDir}}.proton/version\\\" ]]; then read _ InstalledVersion < \\\"{{$FullRootDir}}.proton/version\\\"; else InstalledVersion=\\\"\\\"; fi; if [[ \\\"$InstalledVersion\\\" == \\\"$ProtonVersion\\\" ]]; then echo \\\"Proton GE version $ProtonVersion already installed. Skipping\\\" && exit 0; else [[ -f GE-Proton.tar.gz ]] && rm -f GE-Proton.tar.gz >/dev/null 2>&1; wget -qO GE-Proton.tar.gz https://github.com/GloriousEggroll/proton-ge-custom/releases/download/$ProtonVersion/$ProtonVersion.tar.gz || { echo \\\"Proton GE download failed. Aborting\\\"; exit 1; }; rm -rf \\\"{{$FullRootDir}}.proton/compatdata/\\\"* >/dev/null 2>&1; tar -xzf GE-Proton.tar.gz -C \\\"{{$FullRootDir}}.proton\\\" --strip-components=1 && rm -f GE-Proton.tar.gz >/dev/null 2>&1 && echo \\\"Proton GE version $ProtonVersion downloaded\\\" && { STEAM_COMPAT_DATA_PATH=\\\"{{$FullRootDir}}.proton/compatdata\\\" STEAM_COMPAT_CLIENT_INSTALL_PATH=\\\"{{$FullBaseDir}}.steam/steam\\\" \\\"{{$FullRootDir}}.proton/proton\\\" PROTON_LOG=1 >/dev/null 2>&1; exit 0; }; fi\"",
    "SkipOnFailure": false
  },
  {
    "UpdateStageName": "Disable Prefix Sound",
    "UpdateSourcePlatform": "Linux",
    "UpdateSource": "Executable",
    "UpdateSourceData": "/bin/bash",
    "UpdateSourceArgs": "-c \"export PATH=\\\"{{$FullRootDir}}.proton/files/bin:$PATH\\\"; export WINEPREFIX=\\\"{{$FullRootDir}}.proton/compatdata/pfx\\\"; export WINEARCH=win64; export XDG_RUNTIME_DIR=/tmp; ./.proton/protonfixes/winetricks sound=disabled > winescript_log.txt 2>&1\"",
    "SkipOnFailure": true
  }
]
